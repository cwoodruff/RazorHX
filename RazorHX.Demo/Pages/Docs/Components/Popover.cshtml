@page
@model PopoverModel
@{
    Layout = "_ComponentPage";
    ViewData["Title"] = "Popover";
    ViewData["ComponentName"] = "Popover";
    ViewData["ComponentTag"] = "rhx-popover";
    ViewData["ComponentDescription"] = "Rich content popup anchored to a trigger with placement and arrow options.";
}

<section class="docs-component-section">
    <h2>Examples</h2>

    <!-- Click Trigger -->
    <div class="docs-example">
        <h3>Click Trigger</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="click-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="click-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="click-preview" rhx-active="true">
                <div class="docs-preview">
                    <button class="rhx-button rhx-button--brand" id="pop-click-trigger">Show Popover</button>
                    <rhx-popover rhx-trigger="#pop-click-trigger" rhx-placement="bottom">
                        <h4 style="margin: 0 0 var(--rhx-space-sm) 0; font-weight: var(--rhx-font-weight-bold);">Popover Title</h4>
                        <p style="margin: 0; color: var(--rhx-color-text-muted);">
                            This is a rich content popover. It supports <strong>HTML</strong>, images, and interactive elements.
                        </p>
                    </rhx-popover>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="click-code">
                <div class="docs-code">
                    <pre><code>@Model.ClickTriggerCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <!-- Hover Trigger -->
    <div class="docs-example">
        <h3>Hover Trigger</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="hover-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="hover-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="hover-preview" rhx-active="true">
                <div class="docs-preview">
                    <button class="rhx-button rhx-button--neutral" id="pop-hover-trigger">Hover Me</button>
                    <rhx-popover rhx-trigger="#pop-hover-trigger" rhx-trigger-event="hover" rhx-placement="top">
                        <p style="margin: 0;">This popover appears on hover and disappears when the pointer leaves.</p>
                    </rhx-popover>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="hover-code">
                <div class="docs-code">
                    <pre><code>@Model.HoverTriggerCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <!-- Placements -->
    <div class="docs-example">
        <h3>Placements</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="placements-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="placements-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="placements-preview" rhx-active="true">
                <div class="docs-preview" style="gap: var(--rhx-space-md); flex-wrap: wrap; justify-content: center; padding: var(--rhx-space-xl);">
                    <button class="rhx-button rhx-button--neutral rhx-button--outlined" id="pop-top-trigger">Top</button>
                    <rhx-popover rhx-trigger="#pop-top-trigger" rhx-placement="top">
                        <p style="margin: 0;">Top placement</p>
                    </rhx-popover>

                    <button class="rhx-button rhx-button--neutral rhx-button--outlined" id="pop-bottom-trigger">Bottom</button>
                    <rhx-popover rhx-trigger="#pop-bottom-trigger" rhx-placement="bottom">
                        <p style="margin: 0;">Bottom placement</p>
                    </rhx-popover>

                    <button class="rhx-button rhx-button--neutral rhx-button--outlined" id="pop-left-trigger">Left</button>
                    <rhx-popover rhx-trigger="#pop-left-trigger" rhx-placement="left">
                        <p style="margin: 0;">Left placement</p>
                    </rhx-popover>

                    <button class="rhx-button rhx-button--neutral rhx-button--outlined" id="pop-right-trigger">Right</button>
                    <rhx-popover rhx-trigger="#pop-right-trigger" rhx-placement="right">
                        <p style="margin: 0;">Right placement</p>
                    </rhx-popover>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="placements-code">
                <div class="docs-code">
                    <pre><code>@Model.PlacementsCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <!-- No Arrow -->
    <div class="docs-example">
        <h3>No Arrow</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="noarrow-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="noarrow-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="noarrow-preview" rhx-active="true">
                <div class="docs-preview">
                    <button class="rhx-button rhx-button--brand" id="pop-noarrow-trigger">No Arrow</button>
                    <rhx-popover rhx-trigger="#pop-noarrow-trigger" rhx-placement="bottom" rhx-arrow="false">
                        <p style="margin: 0;">This popover has no directional arrow.</p>
                    </rhx-popover>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="noarrow-code">
                <div class="docs-code">
                    <pre><code>@Model.NoArrowCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>
</section>

<!-- Properties -->
@await Html.PartialAsync("_PropertyTable", Model.Properties)

<!-- Accessibility -->
<section class="docs-component-section">
    <h2>Accessibility</h2>
    <ul class="docs-a11y-list">
        <li>Popover has an appropriate role for its content and is linked to its trigger via <code>aria-controls</code>.</li>
        <li>Focus is managed: when opened, focus moves into the popover; when closed, focus returns to the trigger.</li>
        <li>Pressing <code>Escape</code> closes the popover and returns focus to the trigger.</li>
        <li>Click-triggered popovers toggle with the trigger's <code>aria-expanded</code> attribute.</li>
    </ul>
</section>
