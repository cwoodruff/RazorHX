@page
@model ComboboxModel
@{
    Layout = "_ComponentPage";
    ViewData["Title"] = "Combobox";
    ViewData["ComponentName"] = "Combobox";
    ViewData["ComponentTag"] = "rhx-combobox";
    ViewData["ComponentDescription"] = "Searchable dropdown with type-ahead filtering and model binding.";
}

<section class="docs-component-section">
    <h2>Examples</h2>

    <!-- Basic -->
    <div class="docs-example">
        <h3>Basic</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="basic-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="basic-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="basic-preview" rhx-active="true">
                <div class="docs-preview docs-preview--vertical">
                    <rhx-combobox rhx-label="City" name="city"
                                  rhx-placeholder="Search cities..."
                                  rhx-items="Model.Cities" />
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="basic-code">
                <div class="docs-code">
                    <pre><code>@Model.BasicCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <!-- Enum Binding -->
    <div class="docs-example">
        <h3>Enum Binding</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="enum-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="enum-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="enum-preview" rhx-active="true">
                <div class="docs-preview docs-preview--vertical">
                    <rhx-combobox rhx-label="Priority" name="cbo-priority"
                                  rhx-placeholder="Search priorities..."
                                  rhx-for="SelectedPriority" />
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="enum-code">
                <div class="docs-code">
                    <pre><code>@Model.EnumBindingCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <!-- Filled -->
    <div class="docs-example">
        <h3>Filled</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="filled-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="filled-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="filled-preview" rhx-active="true">
                <div class="docs-preview docs-preview--vertical">
                    <rhx-combobox rhx-label="Country" name="cbo-filled" rhx-filled="true"
                                  rhx-placeholder="Search countries..."
                                  rhx-items="Model.Countries" />
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="filled-code">
                <div class="docs-code">
                    <pre><code>@Model.FilledCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <!-- Child Options -->
    <div class="docs-example">
        <h3>Child Options</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="children-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="children-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="children-preview" rhx-active="true">
                <div class="docs-preview docs-preview--vertical">
                    <rhx-combobox rhx-label="Fruit" name="fruit" rhx-placeholder="Search fruits...">
                        <rhx-option value="apple">Apple</rhx-option>
                        <rhx-option value="banana">Banana</rhx-option>
                        <rhx-option value="cherry">Cherry</rhx-option>
                        <rhx-option value="grape">Grape</rhx-option>
                        <rhx-option value="mango">Mango</rhx-option>
                    </rhx-combobox>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="children-code">
                <div class="docs-code">
                    <pre><code>@Model.ChildOptionsCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <!-- Sizes -->
    <div class="docs-example">
        <h3>Sizes</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="sizes-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="sizes-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="sizes-preview" rhx-active="true">
                <div class="docs-preview docs-preview--vertical">
                    <rhx-combobox rhx-label="Small" name="cbo-sm" rhx-size="small"
                                  rhx-placeholder="Small" rhx-items="Model.Cities" />
                    <rhx-combobox rhx-label="Medium (default)" name="cbo-md"
                                  rhx-placeholder="Medium" rhx-items="Model.Cities" />
                    <rhx-combobox rhx-label="Large" name="cbo-lg" rhx-size="large"
                                  rhx-placeholder="Large" rhx-items="Model.Cities" />
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="sizes-code">
                <div class="docs-code">
                    <pre><code>@Model.SizesCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <!-- States -->
    <div class="docs-example">
        <h3>States</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="states-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="states-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="states-preview" rhx-active="true">
                <div class="docs-preview docs-preview--vertical">
                    <rhx-combobox rhx-label="Disabled" name="cbo-dis" value="NYC"
                                  rhx-disabled="true" rhx-items="Model.Cities" />
                    <rhx-combobox rhx-label="Readonly" name="cbo-ro" value="NYC"
                                  rhx-readonly="true" rhx-items="Model.Cities" />
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="states-code">
                <div class="docs-code">
                    <pre><code>@Model.StatesCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <!-- htmx Integration -->
    <div class="docs-example">
        <h3>htmx Integration</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="htmx-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="htmx-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="htmx-preview" rhx-active="true">
                <div class="docs-preview docs-preview--vertical">
                    <rhx-combobox rhx-label="Search Users" name="userId"
                                  rhx-placeholder="Type a name..."
                                  rhx-server-filter="true"
                                  hx-get="/Docs/Components/Combobox?handler=SearchUsers"
                                  hx-trigger="input changed delay:300ms"
                                  hx-target="find .rhx-combobox__listbox" />
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="htmx-code">
                <div class="docs-code">
                    <pre><code>@Model.HtmxCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>
</section>

<!-- Properties -->
@await Html.PartialAsync("_PropertyTable", Model.Properties)

<!-- Accessibility -->
<section class="docs-component-section">
    <h2>Accessibility</h2>
    <ul class="docs-a11y-list">
        <li>Uses <code>role="combobox"</code> with <code>aria-expanded</code> and <code>aria-autocomplete</code>.</li>
        <li>Listbox options use <code>role="option"</code> with <code>aria-selected</code>.</li>
        <li>Keyboard navigation: arrow keys, Enter to select, Escape to close.</li>
        <li>Active descendant tracked via <code>aria-activedescendant</code>.</li>
    </ul>
</section>
