@page
@model DropdownsModel
@{
    Layout = "_ComponentPage";
    ViewData["Title"] = "Dropdown";
    ViewData["ComponentName"] = "Dropdown";
    ViewData["ComponentTag"] = "rhx-dropdown";
    ViewData["ComponentDescription"] = "A contextual menu with checkbox items, links, placement options, and htmx integration.";
}

<section class="docs-component-section">
    <h2>Examples</h2>

    <div class="docs-example">
        <h3>Basic Dropdown</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="basic-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="basic-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="basic-preview" rhx-active="true">
                <div class="docs-preview">
                    <rhx-dropdown>
                        <rhx-dropdown-trigger>
                            <rhx-button rhx-variant="neutral" rhx-appearance="outlined">
                                Actions &#9662;
                            </rhx-button>
                        </rhx-dropdown-trigger>
                        <rhx-dropdown-item>Edit</rhx-dropdown-item>
                        <rhx-dropdown-item>Duplicate</rhx-dropdown-item>
                        <rhx-dropdown-divider />
                        <rhx-dropdown-item>Archive</rhx-dropdown-item>
                        <rhx-dropdown-item rhx-disabled="true">Delete</rhx-dropdown-item>
                    </rhx-dropdown>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="basic-code">
                <div class="docs-code">
                    <pre><code>@Model.BasicCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <div class="docs-example">
        <h3>Placements</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="placements-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="placements-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="placements-preview" rhx-active="true">
                <div class="docs-preview">
                    <rhx-dropdown rhx-placement="bottom-start">
                        <rhx-dropdown-trigger>
                            <rhx-button rhx-variant="brand">Bottom Start &#9662;</rhx-button>
                        </rhx-dropdown-trigger>
                        <rhx-dropdown-item>Item A</rhx-dropdown-item>
                        <rhx-dropdown-item>Item B</rhx-dropdown-item>
                    </rhx-dropdown>

                    <rhx-dropdown rhx-placement="bottom-end">
                        <rhx-dropdown-trigger>
                            <rhx-button rhx-variant="brand">Bottom End &#9662;</rhx-button>
                        </rhx-dropdown-trigger>
                        <rhx-dropdown-item>Item A</rhx-dropdown-item>
                        <rhx-dropdown-item>Item B</rhx-dropdown-item>
                    </rhx-dropdown>

                    <rhx-dropdown rhx-placement="top-start">
                        <rhx-dropdown-trigger>
                            <rhx-button rhx-variant="brand">Top Start &#9652;</rhx-button>
                        </rhx-dropdown-trigger>
                        <rhx-dropdown-item>Item A</rhx-dropdown-item>
                        <rhx-dropdown-item>Item B</rhx-dropdown-item>
                    </rhx-dropdown>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="placements-code">
                <div class="docs-code">
                    <pre><code>@Model.PlacementsCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <div class="docs-example">
        <h3>Checkbox Items</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="checkbox-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="checkbox-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="checkbox-preview" rhx-active="true">
                <div class="docs-preview">
                    <rhx-dropdown rhx-stay-open="true">
                        <rhx-dropdown-trigger>
                            <rhx-button rhx-variant="neutral" rhx-appearance="outlined">
                                Columns &#9662;
                            </rhx-button>
                        </rhx-dropdown-trigger>
                        <rhx-dropdown-item rhx-type="checkbox" rhx-checked="true" rhx-value="name">
                            Name
                        </rhx-dropdown-item>
                        <rhx-dropdown-item rhx-type="checkbox" rhx-checked="true" rhx-value="email">
                            Email
                        </rhx-dropdown-item>
                        <rhx-dropdown-item rhx-type="checkbox" rhx-value="phone">
                            Phone
                        </rhx-dropdown-item>
                        <rhx-dropdown-item rhx-type="checkbox" rhx-value="role">
                            Role
                        </rhx-dropdown-item>
                    </rhx-dropdown>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="checkbox-code">
                <div class="docs-code">
                    <pre><code>@Model.CheckboxCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <div class="docs-example">
        <h3>Link Items</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="links-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="links-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="links-preview" rhx-active="true">
                <div class="docs-preview">
                    <rhx-dropdown>
                        <rhx-dropdown-trigger>
                            <rhx-button rhx-variant="neutral" rhx-appearance="outlined">
                                Navigate &#9662;
                            </rhx-button>
                        </rhx-dropdown-trigger>
                        <rhx-dropdown-item rhx-href="/">Home</rhx-dropdown-item>
                        <rhx-dropdown-item rhx-href="/Docs/Components/Dropdowns">Dropdowns</rhx-dropdown-item>
                        <rhx-dropdown-divider />
                        <rhx-dropdown-item rhx-href="/Error">Error Page</rhx-dropdown-item>
                    </rhx-dropdown>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="links-code">
                <div class="docs-code">
                    <pre><code>@Model.LinksCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <div class="docs-example">
        <h3>htmx Integration</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="htmx-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="htmx-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="htmx-preview" rhx-active="true">
                <div class="docs-preview">
                    <rhx-dropdown>
                        <rhx-dropdown-trigger>
                            <rhx-button rhx-variant="brand" rhx-appearance="outlined">
                                Actions &#9662;
                            </rhx-button>
                        </rhx-dropdown-trigger>
                        <rhx-dropdown-item hx-post="/Docs/Components/Dropdowns?handler=Edit" hx-target="#dropdown-result" hx-swap="innerHTML">
                            Edit Item
                        </rhx-dropdown-item>
                        <rhx-dropdown-item hx-post="/Docs/Components/Dropdowns?handler=Duplicate" hx-target="#dropdown-result" hx-swap="innerHTML">
                            Duplicate Item
                        </rhx-dropdown-item>
                        <rhx-dropdown-divider />
                        <rhx-dropdown-item hx-delete="/Docs/Components/Dropdowns?handler=Remove" hx-target="#dropdown-result" hx-swap="innerHTML"
                                           hx-confirm="Are you sure?">
                            Delete Item
                        </rhx-dropdown-item>
                    </rhx-dropdown>
                    <span id="dropdown-result" style="color: var(--rhx-color-text-muted);">Select an action...</span>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="htmx-code">
                <div class="docs-code">
                    <pre><code>@Model.HtmxCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>

    <div class="docs-example">
        <h3>States</h3>
        <rhx-tab-group>
            <rhx-tab rhx-panel="states-preview" rhx-active="true">Preview</rhx-tab>
            <rhx-tab rhx-panel="states-code">Code</rhx-tab>
            <rhx-tab-panel rhx-name="states-preview" rhx-active="true">
                <div class="docs-preview" style="min-height: 8rem;">
                    <rhx-dropdown rhx-disabled="true">
                        <rhx-dropdown-trigger>
                            <rhx-button rhx-variant="neutral" rhx-appearance="outlined" rhx-disabled="true">
                                Disabled &#9662;
                            </rhx-button>
                        </rhx-dropdown-trigger>
                        <rhx-dropdown-item>Unreachable</rhx-dropdown-item>
                    </rhx-dropdown>

                    <rhx-dropdown rhx-open="true">
                        <rhx-dropdown-trigger>
                            <rhx-button rhx-variant="success" rhx-appearance="outlined">
                                Open &#9662;
                            </rhx-button>
                        </rhx-dropdown-trigger>
                        <rhx-dropdown-item>Already visible</rhx-dropdown-item>
                        <rhx-dropdown-item>Second item</rhx-dropdown-item>
                    </rhx-dropdown>
                </div>
            </rhx-tab-panel>
            <rhx-tab-panel rhx-name="states-code">
                <div class="docs-code">
                    <pre><code>@Model.StatesCode</code></pre>
                </div>
            </rhx-tab-panel>
        </rhx-tab-group>
    </div>
</section>

@await Html.PartialAsync("_PropertyTable", Model.Properties)

<section class="docs-component-section">
    <h2>Item Properties</h2>
    <p style="margin-bottom: var(--rhx-space-md); color: var(--rhx-color-text-muted);">
        Properties for <code>&lt;rhx-dropdown-item&gt;</code> elements.
    </p>
    @await Html.PartialAsync("_PropertyTable", Model.ItemProperties)
</section>

<section class="docs-component-section">
    <h2>Accessibility</h2>
    <ul class="docs-a11y-list">
        <li>The trigger button receives <code>aria-haspopup="true"</code> and <code>aria-expanded</code> reflecting menu state.</li>
        <li>The menu uses <code>role="menu"</code> with items using <code>role="menuitem"</code> or <code>role="menuitemcheckbox"</code>.</li>
        <li>Arrow keys navigate between items; <kbd>Enter</kbd> or <kbd>Space</kbd> activates the focused item.</li>
        <li><kbd>Escape</kbd> closes the menu and returns focus to the trigger.</li>
        <li>Disabled items receive <code>aria-disabled="true"</code> and are skipped during keyboard navigation.</li>
        <li>Link items render as <code>&lt;a&gt;</code> elements with <code>role="menuitem"</code>.</li>
    </ul>
</section>
