/* ================================================================
   htmxRazor Dropdown Component
   BEM:  rhx-dropdown  /  rhx-dropdown__{panel,item,item-label,
         item-check,divider}
         rhx-dropdown--{open,disabled}
         rhx-dropdown__item--{checkbox,checked,disabled}
   ================================================================ */

/* ── Container ── */
.rhx-dropdown {
  position: relative;
  display: inline-block;
}

/* ── Trigger wrapper ── */
[data-rhx-dropdown-trigger] {
  display: inline-flex;
}

/* ══════════════════════════════════════════════════════════════
   PANEL
   ══════════════════════════════════════════════════════════════ */

.rhx-dropdown__panel {
  position: absolute;
  z-index: var(--rhx-z-dropdown);
  min-width: 10rem;
  padding: var(--rhx-space-xs) 0;
  background: var(--rhx-color-surface);
  border: var(--rhx-border-width) solid var(--rhx-color-border);
  border-radius: var(--rhx-radius-md);
  box-shadow: var(--rhx-shadow-lg);
  overflow-y: auto;
  max-height: 20rem;
}

/* ══════════════════════════════════════════════════════════════
   PLACEMENT (CSS-based positioning)
   ══════════════════════════════════════════════════════════════ */

/* Default: bottom-start */
.rhx-dropdown__panel,
[data-rhx-placement="bottom-start"] > .rhx-dropdown__panel {
  top: 100%;
  left: 0;
  margin-top: var(--rhx-space-xs);
}

[data-rhx-placement="bottom-end"] > .rhx-dropdown__panel {
  top: 100%;
  left: auto;
  right: 0;
  margin-top: var(--rhx-space-xs);
}

[data-rhx-placement="bottom"] > .rhx-dropdown__panel {
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: var(--rhx-space-xs);
}

[data-rhx-placement="top-start"] > .rhx-dropdown__panel {
  bottom: 100%;
  left: 0;
  top: auto;
  margin-bottom: var(--rhx-space-xs);
}

[data-rhx-placement="top-end"] > .rhx-dropdown__panel {
  bottom: 100%;
  left: auto;
  right: 0;
  top: auto;
  margin-bottom: var(--rhx-space-xs);
}

[data-rhx-placement="top"] > .rhx-dropdown__panel {
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  top: auto;
  margin-bottom: var(--rhx-space-xs);
}

/* ── Flip state (set by JS when viewport collision detected) ── */
[data-rhx-flipped][data-rhx-placement^="bottom"] > .rhx-dropdown__panel {
  top: auto;
  bottom: 100%;
  margin-top: 0;
  margin-bottom: var(--rhx-space-xs);
}

[data-rhx-flipped][data-rhx-placement^="top"] > .rhx-dropdown__panel {
  bottom: auto;
  top: 100%;
  margin-bottom: 0;
  margin-top: var(--rhx-space-xs);
}

/* ══════════════════════════════════════════════════════════════
   ITEMS
   ══════════════════════════════════════════════════════════════ */

.rhx-dropdown__item {
  display: flex;
  align-items: center;
  gap: var(--rhx-space-sm);
  width: 100%;
  padding: var(--rhx-space-sm) var(--rhx-space-lg);
  font-family: var(--rhx-font-family);
  font-size: var(--rhx-font-size-sm);
  line-height: var(--rhx-line-height-tight);
  color: var(--rhx-color-text);
  background: transparent;
  border: none;
  cursor: pointer;
  text-decoration: none;
  text-align: left;
  white-space: nowrap;
  transition-property: background-color, color;
  transition-duration: var(--rhx-transition-fast);
  transition-timing-function: ease;
}

.rhx-dropdown__item:hover {
  background: var(--rhx-color-hover);
}

.rhx-dropdown__item:focus {
  outline: none;
}

.rhx-dropdown__item:focus-visible {
  outline: 2px solid var(--rhx-color-focus-ring);
  outline-offset: -2px;
  background: var(--rhx-color-hover);
}

/* ── Item label ── */
.rhx-dropdown__item-label {
  flex: 1;
}

/* ── Disabled item ── */
.rhx-dropdown__item--disabled,
.rhx-dropdown__item:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* ══════════════════════════════════════════════════════════════
   CHECKBOX ITEMS
   ══════════════════════════════════════════════════════════════ */

.rhx-dropdown__item-check {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1rem;
  height: 1rem;
  flex-shrink: 0;
  font-size: var(--rhx-font-size-xs);
  color: var(--rhx-color-brand-600);
}

.rhx-dropdown__item--checked {
  font-weight: var(--rhx-font-weight-medium);
}

/* ══════════════════════════════════════════════════════════════
   DIVIDER
   ══════════════════════════════════════════════════════════════ */

.rhx-dropdown__divider {
  height: 0;
  margin: var(--rhx-space-xs) 0;
  border-top: var(--rhx-border-width) solid var(--rhx-color-border-muted);
}

/* ══════════════════════════════════════════════════════════════
   DISABLED CONTAINER
   ══════════════════════════════════════════════════════════════ */

.rhx-dropdown--disabled [data-rhx-dropdown-trigger] {
  opacity: 0.5;
  pointer-events: none;
}

/* ══════════════════════════════════════════════════════════════
   REDUCED MOTION
   ══════════════════════════════════════════════════════════════ */

@media (prefers-reduced-motion: reduce) {
  .rhx-dropdown__item {
    transition-duration: 0.01ms;
  }
}
